{"componentChunkName":"component---src-templates-post-template-tsx","path":"/react-hooks-useImperativeHandle/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>useImperativeHandle</h2>\n<p><code class=\"language-text\">ref</code>로 노출된 핸들을 사용자 정의할 수 있는 React Hook이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> forwardRef<span class=\"token punctuation\">,</span> useImperativeHandle <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// createHandle methods</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// optional dependencies</span>\n</code></pre></div>\n<h3>파라미터</h3>\n<ul>\n<li><code class=\"language-text\">ref</code>\n<ul>\n<li>렌더링 함수 <code class=\"language-text\">forwardRef</code>에서 두 번째 매개 변수로 받은 <code class=\"language-text\">ref</code>이다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">createHandle</code>\n<ul>\n<li>매개 변수 없이 노출하고 싶은 <code class=\"language-text\">ref</code> 핸들을 <code class=\"language-text\">return</code> 하는 함수이다.</li>\n</ul>\n</li>\n<li>optional <code class=\"language-text\">dependencies</code>\n<ul>\n<li><code class=\"language-text\">createHandle</code> 함수 내에 반응형 값을 사용했다면, 해당 반응형 값이 포함된 배열이다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h2>Usage</h2>\n<h3>Exposing a custom ref handle to the parent component</h3>\n<p>기본적으로 컴포넌트는 상위 컴포넌트에게 DOM 노드를 노출하지 않는다. 예를 들어, <code class=\"language-text\">MyInput</code>의 상위 컴포넌트가 <code class=\"language-text\">&lt;input></code> DOM 노드에 접근할 수 있도록 하려면 <code class=\"language-text\">forwardRef</code>로 허용시켜주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> forwardRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드에서 <code class=\"language-text\">MyInput</code>의 <code class=\"language-text\">ref</code>는 <code class=\"language-text\">&lt;input></code> DOM 노드를 받을 것이다. 하지만 사용자 지정 값을 노출할 수 있다. 노출된 핸들을 사용자 지정하고 싶으면 아래와 같이 코드를 작성하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> forwardRef<span class=\"token punctuation\">,</span> useImperativeHandle <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>\n    ref<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ... your methods ...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드에서는 <code class=\"language-text\">ref</code>에 <code class=\"language-text\">&lt;input></code>이 전달되지 않는다. 예를 들어, 전체 <code class=\"language-text\">&lt;input></code> DOM 노드를 노출하지 않고 <code class=\"language-text\">focus</code>나 <code class=\"language-text\">scrollIntoView</code> 함수를 노출하고 싶다고 가정해보자. 이렇게 하기 위해서는 실제 브라우저 DOM을 별도의 ref에 보관한 다음 <code class=\"language-text\">useImperativeHandle</code>을 사용하여 부모 컴포넌트에서 호출하려는 메서드만 있는 핸들을 노출하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> forwardRef<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useImperativeHandle <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>\n    ref<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">scrollIntoView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">scrollIntoView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 상위 컴포넌트가 <code class=\"language-text\">MyInput</code>에서 <code class=\"language-text\">ref</code>를 가져오면 <code class=\"language-text\">focus</code>랑 <code class=\"language-text\">scrollIntoView</code>를 호출할 수 있다. 하지만 <code class=\"language-text\">&lt;input></code> DOM 노드에 대한 완전한 접근은 할 수 없다.</p>\n<br>\n<aside>\n😵 <strong>주의</strong> <br>\nprops으로 표현할 수 없는 imperative한 행동을 위해서만 ref를 사용해야 한다. 그리고, 만약 prop으로 표현할 수 있다면 ref를 사용하면 안된다.\n</aside>\n<br>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://react.dev/reference/react/useImperativeHandle\" target=\"_blank\" rel=\"nofollow\">react/useImperativeHandle</a></li>\n</ul>\n<br>","frontmatter":{"title":"useImperativeHandle이란?","summary":"React Hook 중 useImperativeHandle에 대해 알아보자.","date":"2023.06.18","categories":{"type":["React"],"tags":["React Docs"]},"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAk0lEQVR42p3PUQuCMBQFYH99+Oq/KYR8kRCxdNbUQU+FEJU+OdyI7YQRPagb0nka97CPex0YorX+vdO6waF+4qXUpBvHMWHq++l0a+GFFF5YILk+PrOhM6GLwNWWwA0I4sv9P3B8Fms5yqab7RZvOKTjHOuNj5JSnBlDRnIIIayoFZRSghYVkn2KXRSD5Ef0vR18A0VG0vTXCbUqAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/353ad/react.png","srcSet":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/21fc8/react.png 346w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/168f3/react.png 691w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/353ad/react.png 1382w","sizes":"(min-width: 1382px) 1382px, 100vw"},"sources":[{"srcSet":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/7bd2f/react.webp 346w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/a8fd0/react.webp 691w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/8aede/react.webp 1382w","type":"image/webp","sizes":"(min-width: 1382px) 1382px, 100vw"}]},"width":1382,"height":434}},"publicURL":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/react.png"}}}}]}},"pageContext":{"slug":"/react-hooks-useImperativeHandle/"}},"staticQueryHashes":[],"slicesMap":{}}