{"componentChunkName":"component---src-templates-post-template-tsx","path":"/react-dangerouslysetinnerhtml-xss/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>dangerouslySetInnerHTML</h3>\n<p>React에서는 JSX로 직접 HTML을 작성하지만, 간혹 문자열 형태의 HTML을 렌더링해야 할 때 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;strong>Hello&lt;/strong>\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>이런 식으로 DOM에 직접 HTML을 삽입한다.</p>\n<br>\n<h2>문제점</h2>\n<p><strong>1. XSS (Cross-Site Scripting) 공격 위험</strong></p>\n<ul>\n<li>\n<p>외부 입력값을 그대로 넣으면 악성 스크립트 삽입 가능</p>\n</li>\n<li>\n<p>이게 그대로 렌더링되면 사용자 브라우저에서 실행됨</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;img src=x onerror=\"alert('XSS!')\" /></span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n</li>\n</ul>\n<p><strong>2. 브라우저 보안 정책 우회</strong></p>\n<ul>\n<li>React는 의도적으로 <code class=\"language-text\">dangerouslySetInnerHTML</code>이라는 이름을 붙여 경고함</li>\n<li>DOM 조작이 직접 이루어지므로 React의 Virtual DOM 관리와 어긋날 수 있음</li>\n<li>React는 <code class=\"language-text\">dangerouslySetInnerHTML</code>로 삽입된 영역을 다시 diff하지 않기 때문에, <strong>업데이트 누락이나 UI 깨짐</strong>이 발생할 수 있음</li>\n</ul>\n<p><strong>3. HTML injection 가능성</strong></p>\n<ul>\n<li>신뢰할 수 없는 데이터가 포함된 경우 HTML 구조가 깨질 수 있음</li>\n</ul>\n<br>\n<h2>언제 써도 괜찮은가?</h2>\n<ul>\n<li>\n<p>정적이고 신뢰할 수 있는 HTML 문자열만 사용하는 경우</p>\n<p>(예: CMS에서 관리자가 입력한 HTML, 마크다운 렌더링 결과 등)</p>\n</li>\n<li>\n<p>필요한 경우에만 제한적으로 사용, 절대로 사용자 입력 그대로 넘기면 안 됨</p>\n</li>\n</ul>\n<br>\n<h2>대안</h2>\n<p><strong>1. HTML 파서 라이브러리 사용</strong></p>\n<p>예: <a href=\"https://github.com/remarkablemark/html-react-parser\" target=\"_blank\" rel=\"nofollow\"><code class=\"language-text\">html-react-parser</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> parse <span class=\"token keyword\">from</span> <span class=\"token string\">'html-react-parser'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> safeHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;strong>안녕하세요&lt;/strong>'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>safeHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>JSX 변환 가능</li>\n<li>일부 태그 필터링도 지원</li>\n</ul>\n<p><strong>2. sanitize 후 사용</strong></p>\n<p>예: <a href=\"https://github.com/cure53/DOMPurify\" target=\"_blank\" rel=\"nofollow\"><code class=\"language-text\">DOMPurify</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> DOMPurify <span class=\"token keyword\">from</span> <span class=\"token string\">'dompurify'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> clean <span class=\"token operator\">=</span> DOMPurify<span class=\"token punctuation\">.</span><span class=\"token function\">sanitize</span><span class=\"token punctuation\">(</span>userHtml<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> clean <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>보안 취약점 방어에 특화</li>\n<li>신뢰할 수 없는 HTML을 렌더링할 때 반드시 sanitize 필요</li>\n</ul>\n<br>\n<h2>결론</h2>\n<ul>\n<li>위험성: XSS 및 보안 위협, React DOM 무결성 훼손 가능</li>\n<li>허용 조건: 신뢰된 콘텐츠, sanitize된 HTML</li>\n<li>하지 말아야 할 것: 사용자 입력을 그대로 dangerouslySetInnerHTML로 렌더링</li>\n<li>대안: <code class=\"language-text\">html-react-parser</code>, <code class=\"language-text\">DOMPurify</code>, 혹은 직접 컴포넌트 구성</li>\n</ul>\n<blockquote>\n<p>가능하면 사용을 피하고, 반드시 필요한 경우엔 보안 필터를 거친 후 사용하기</p>\n<p>특히 금융/보안/기업 서비스에서는 감사 로그 및 필터링 체계와 함께 쓰는 것이 안전하다.</p>\n</blockquote>","frontmatter":{"title":"React에서 dangerouslySetInnerHTML 안전하게 쓰는 법","summary":"React에서 dangerouslySetInnerHTML을 사용할 때 발생할 수 있는 보안 문제와 안전하게 다루는 방법을 알아보자.","date":"2025.07.07","categories":{"type":["React"],"tags":["React","Security"]},"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAlklEQVR42p2PwQqCQBRF/fva+jdFUJuKEBMdbGpoFwVBZquhmXQ8WdiiIAXv5j24j/Pu9ehQ4RzRKWN9zLgXZdc53j/DVdV7pucb/lziLyRhDX2psfoCcwbThOFMEBwu/YEfPUqHyjXbq8bUe6/KVRNBa81oPEGmG/ZKEScCY2xrytaE1lqk3BFGMctVQCLSGmi+nv4Cn0Kl0vnXTNsKAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/353ad/react.png","srcSet":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/21fc8/react.png 346w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/168f3/react.png 691w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/353ad/react.png 1382w","sizes":"(min-width: 1382px) 1382px, 100vw"},"sources":[{"srcSet":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/7bd2f/react.webp 346w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/a8fd0/react.webp 691w,\n/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/8aede/react.webp 1382w","type":"image/webp","sizes":"(min-width: 1382px) 1382px, 100vw"}]},"width":1382,"height":434}},"publicURL":"/static/9ca52ecc81aa3b9cdcf283b0b7699e4e/react.png"}}}}]}},"pageContext":{"slug":"/react-dangerouslysetinnerhtml-xss/"}},"staticQueryHashes":[],"slicesMap":{}}